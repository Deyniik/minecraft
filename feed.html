<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deynik Minecraft - –õ–µ–Ω—Ç–∞</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif;
        }

        body {
            background-color: #0f0f11;
            display: flex;
            justify-content: center;
            min-height: 100vh;
            padding: 2rem 1rem;
        }

        .container {
            max-width: 1400px;
            width: 100%;
            display: flex;
            gap: 2rem;
        }

        :root {
            --bg-body: #0f0f11;
            --bg-raised: #1c1c1f;
            --bg-button: #2c2c30;
            --bg-button-hover: #3a3a40;
            --bg-selected: #3b3b45;
            --text-contrast: #ffffff;
            --text-primary: #e0e0e0;
            --text-secondary: #a0a0a8;
            --text-brand: #fbbf24;
            --bg-brand: rgba(251, 191, 36, 0.15);
            --border-subtle: #2c2c32;
            --card-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
            
            /* –¶–≤–µ—Ç–∞ –¥–ª—è —Ç–∏–ø–æ–≤ –ø—Ä–æ–µ–∫—Ç–æ–≤ */
            --color-mod: #fbbf24;
            --color-shader: #a78bfa;
            --color-resourcepack: #60a5fa;
            --color-modpack: #f87171;
            --color-plugin: #34d399;
            --color-datapack: #f472b6;
        }

        /* –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å */
        .sidebar {
            width: 260px;
            flex-shrink: 0;
            background-color: var(--bg-raised);
            border-radius: 1rem;
            border: 1px solid var(--border-subtle);
            padding: 1.5rem 1rem;
            height: fit-content;
            position: sticky;
            top: 2rem;
        }

        .sidebar-logo {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--text-contrast);
            margin-bottom: 2rem;
            padding-left: 0.5rem;
            cursor: pointer;
        }

        .sidebar-logo span {
            color: var(--text-brand);
        }

        .sidebar-menu {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            margin-bottom: 2rem;
        }

        .sidebar-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.75rem 1rem;
            border-radius: 0.75rem;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
            font-size: 1rem;
            font-weight: 500;
        }

        .sidebar-item:hover {
            background-color: var(--bg-button);
            color: var(--text-contrast);
        }

        .sidebar-item.active {
            background-color: var(--bg-brand);
            color: var(--text-brand);
        }

        .sidebar-item svg {
            width: 1.5rem;
            height: 1.5rem;
            stroke: currentColor;
            fill: none;
        }

        /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */
        .main-content {
            flex: 1;
            min-width: 0;
            max-width: 800px;
            margin: 0 auto;
        }

        /* –®–∞–ø–∫–∞ –ª–µ–Ω—Ç—ã */
        .feed-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 2rem;
        }

        .feed-title {
            font-size: 2rem;
            font-weight: 700;
            color: var(--text-contrast);
        }

        .feed-title span {
            color: var(--text-brand);
        }

        .refresh-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background-color: var(--bg-button);
            border: 1px solid var(--border-subtle);
            color: var(--text-secondary);
            padding: 0.5rem 1rem;
            border-radius: 0.75rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .refresh-btn:hover {
            background-color: var(--bg-button-hover);
            color: var(--text-contrast);
            border-color: var(--text-brand);
        }

        .refresh-btn svg {
            width: 1.25rem;
            height: 1.25rem;
            stroke: currentColor;
        }

        /* –õ–µ–Ω—Ç–∞ */
        .feed {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        /* –ü–æ—Å—Ç */
        .feed-post {
            background-color: var(--bg-raised);
            border-radius: 1rem;
            border: 1px solid var(--border-subtle);
            overflow: hidden;
            transition: all 0.2s;
            cursor: pointer;
        }

        .feed-post:hover {
            transform: translateY(-2px);
            box-shadow: var(--card-shadow);
            border-color: var(--text-brand);
        }

        /* –®–∞–ø–∫–∞ –ø–æ—Å—Ç–∞ */
        .post-header {
            display: flex;
            gap: 1rem;
            padding: 1.5rem;
            border-bottom: 1px solid var(--border-subtle);
        }

        .post-icon {
            width: 64px;
            height: 64px;
            border-radius: 1rem;
            background-color: var(--bg-button);
            object-fit: cover;
        }

        .post-info {
            flex: 1;
        }

        .post-title-row {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            flex-wrap: wrap;
            margin-bottom: 0.25rem;
        }

        .post-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--text-contrast);
        }

        .post-type {
            display: inline-flex;
            align-items: center;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .post-type.mod {
            background-color: var(--color-mod);
            color: #000;
        }

        .post-type.shader {
            background-color: var(--color-shader);
            color: #000;
        }

        .post-type.resourcepack {
            background-color: var(--color-resourcepack);
            color: #000;
        }

        .post-type.modpack {
            background-color: var(--color-modpack);
            color: #000;
        }

        .post-type.plugin {
            background-color: var(--color-plugin);
            color: #000;
        }

        .post-type.datapack {
            background-color: var(--color-datapack);
            color: #000;
        }

        .post-author {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .post-stats {
            display: flex;
            gap: 1rem;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .post-stat {
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .post-stat svg {
            width: 1rem;
            height: 1rem;
            stroke: currentColor;
            fill: none;
        }

        /* –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ—Å—Ç–∞ */
        .post-image {
            width: 100%;
            aspect-ratio: 16/9;
            object-fit: cover;
            cursor: pointer;
        }

        /* –¢–µ–ª–æ –ø–æ—Å—Ç–∞ */
        .post-body {
            padding: 1.5rem;
        }

        .post-description {
            color: var(--text-primary);
            font-size: 1rem;
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .post-categories {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .category-tag {
            background-color: var(--bg-button);
            border: 1px solid var(--border-subtle);
            border-radius: 9999px;
            padding: 0.25rem 0.75rem;
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        /* –ü–æ–¥–≤–∞–ª –ø–æ—Å—Ç–∞ */
        .post-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.5rem;
            background-color: rgba(0, 0, 0, 0.2);
            border-top: 1px solid var(--border-subtle);
        }

        .post-date {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .post-actions {
            display: flex;
            gap: 0.5rem;
        }

        .action-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background-color: var(--bg-button);
            border: 1px solid var(--border-subtle);
            color: var(--text-secondary);
            padding: 0.5rem 1rem;
            border-radius: 0.75rem;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.9rem;
        }

        .action-btn:hover {
            background-color: var(--bg-button-hover);
            color: var(--text-contrast);
        }

        .action-btn svg {
            width: 1rem;
            height: 1rem;
            stroke: currentColor;
        }

        /* –ó–∞–≥—Ä—É–∑–∫–∞ */
        .loading {
            text-align: center;
            padding: 3rem;
            font-size: 1.2rem;
            color: var(--text-secondary);
        }

        /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –≥–∞–ª–µ—Ä–µ–∏ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            max-width: 90vw;
            max-height: 90vh;
        }

        .modal-content img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .modal-close {
            position: absolute;
            top: 1rem;
            right: 2rem;
            color: white;
            font-size: 3rem;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –≥–∞–ª–µ—Ä–µ–∏ -->
    <div class="modal" id="galleryModal" onclick="closeModal()">
        <span class="modal-close">&times;</span>
        <div class="modal-content">
            <img id="modalImage" src="" alt="">
        </div>
    </div>

    <div class="container">
        <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
        <div class="sidebar">
            <div class="sidebar-logo" onclick="window.location.href='/minecraft/'">Deynik <span>Minecraft</span></div>
            
            <div class="sidebar-menu">
                <button class="sidebar-item" onclick="window.location.href='/minecraft/'">
                    <svg viewBox="0 0 24 24"><path d="M3 10.5L12 3l9 7.5v9a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 3 19.5v-9z"/><path d="M9 21v-6h6v6"/></svg>
                    –ì–ª–∞–≤–Ω–∞—è
                </button>
                <button class="sidebar-item active" onclick="window.location.href='/minecraft/feed.html'">
                    <svg viewBox="0 0 24 24"><path d="M22 6.5L12 2 2 6.5M22 6.5L12 11 2 6.5M22 6.5V17M2 6.5V17M12 11v9"/><path d="M7 15l5 3 5-3"/></svg>
                    –õ–µ–Ω—Ç–∞
                </button>
            </div>

            <div class="sidebar-menu">
                <button class="sidebar-item" data-tab="mod" onclick="window.location.href='/minecraft/?#mod'">
                    <svg viewBox="0 0 24 24"><path d="M20 7h-4.5L15 4H9L8.5 7H4v2h16V7z"/><rect x="4" y="9" width="16" height="10" rx="1"/><circle cx="8" cy="13" r="1"/><circle cx="16" cy="13" r="1"/></svg>
                    –ú–æ–¥—ã
                </button>
                <button class="sidebar-item" data-tab="shader" onclick="window.location.href='/minecraft/?#shader'">
                    <svg viewBox="0 0 24 24"><path d="M12 3v1M5 8h1M18 8h1M8 21h8M12 8v8"/><circle cx="12" cy="15" r="3"/><path d="M8 11L5 8M16 11l3-3"/></svg>
                    –®–µ–π–¥–µ—Ä—ã
                </button>
                <button class="sidebar-item" data-tab="resourcepack" onclick="window.location.href='/minecraft/?#resourcepack'">
                    <svg viewBox="0 0 24 24"><path d="M4 4h16v16H4z"/><path d="M9 9l6 6M15 9l-6 6"/></svg>
                    –†–µ—Å—É—Ä—Å–ø–∞–∫–∏
                </button>
                <button class="sidebar-item" data-tab="modpack" onclick="window.location.href='/minecraft/?#modpack'">
                    <svg viewBox="0 0 24 24"><path d="M4 4h16v2H4z"/><rect x="4" y="8" width="16" height="12" rx="1"/><path d="M10 12l2 2 4-4"/></svg>
                    –°–±–æ—Ä–∫–∏
                </button>
                <button class="sidebar-item" data-tab="plugin" onclick="window.location.href='/minecraft/?#plugin'">
                    <svg viewBox="0 0 24 24"><path d="M20 12v4a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-4"/><rect x="4" y="4" width="16" height="8" rx="1"/><circle cx="12" cy="12" r="2"/></svg>
                    –ü–ª–∞–≥–∏–Ω—ã
                </button>
                <button class="sidebar-item" data-tab="datapack" onclick="window.location.href='/minecraft/?#datapack'">
                    <svg viewBox="0 0 24 24"><path d="M4 4h16v16H4z"/><path d="M8 8h8v8H8z"/><path d="M12 12l2-2-2-2"/></svg>
                    –î–∞—Ç–∞–ø–∞–∫–∏
                </button>
            </div>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <div class="main-content">
            <div class="feed-header">
                <h1 class="feed-title">–°–ª—É—á–∞–π–Ω–∞—è <span>–ª–µ–Ω—Ç–∞</span></h1>
                <button class="refresh-btn" onclick="loadFeed()">
                    <svg viewBox="0 0 24 24"><path d="M1 4v6h6"/><path d="M3.5 15a9 9 0 1 0 2.1-9.8L1 10"/></svg>
                    –û–±–Ω–æ–≤–∏—Ç—å
                </button>
            </div>

            <div class="feed" id="feed">
                <div class="loading">‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞ –ª–µ–Ω—Ç—ã...</div>
            </div>
        </div>
    </div>

    <script>
        // ========== –ù–ê–°–¢–†–û–ô–ö–ò ==========
        const API_BASE = 'https://api.modrinth.com/v2';
        const TRANSLATE_API = 'https://translate.googleapis.com/translate_a/single?client=gtx&sl=en&tl=ru&dt=t&q=';
        const POSTS_PER_PAGE = 15;

        // –¢–∏–ø—ã –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏ –∏—Ö —Ü–≤–µ—Ç–∞
        const projectTypes = ['mod', 'shader', 'resourcepack', 'modpack', 'plugin', 'datapack'];
        const projectTypeNames = {
            'mod': '–ú–æ–¥',
            'shader': '–®–µ–π–¥–µ—Ä',
            'resourcepack': '–†–µ—Å—É—Ä—Å–ø–∞–∫',
            'modpack': '–°–±–æ—Ä–∫–∞',
            'plugin': '–ü–ª–∞–≥–∏–Ω',
            'datapack': '–î–∞—Ç–∞–ø–∞–∫'
        };

        // –°–æ—Å—Ç–æ—è–Ω–∏–µ
        let feedPosts = [];
        let cachedTranslations = new Map();

        // ========== –§–£–ù–ö–¶–ò–Ø –î–õ–Ø –ì–ê–õ–ï–†–ï–ò ==========
        window.openModal = function(src) {
            document.getElementById('modalImage').src = src;
            document.getElementById('galleryModal').classList.add('show');
        };

        window.closeModal = function() {
            document.getElementById('galleryModal').classList.remove('show');
        };

        // ========== –ü–ï–†–ï–í–û–î ==========
        async function translateText(text) {
            if (!text || text.length < 20) return text;
            if (cachedTranslations.has(text)) return cachedTranslations.get(text);
            
            try {
                const response = await fetch(TRANSLATE_API + encodeURIComponent(text));
                const data = await response.json();
                const translated = data[0][0][0];
                cachedTranslations.set(text, translated);
                return translated;
            } catch (error) {
                console.warn('–û—à–∏–±–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–∞:', error);
                return text;
            }
        }

        // ========== –§–û–†–ú–ê–¢–ò–†–û–í–ê–ù–ò–ï –ß–ò–°–ï–õ ==========
        function formatNumber(num) {
            if (!num) return '0';
            if (num >= 1_000_000) return (num / 1_000_000).toFixed(1) + 'M';
            if (num >= 1_000) return (num / 1_000).toFixed(1) + 'k';
            return num.toString();
        }

        // ========== –§–û–†–ú–ê–¢–ò–†–û–í–ê–ù–ò–ï –î–ê–¢–´ ==========
        function formatRelativeDate(dateString) {
            if (!dateString) return '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
            const date = new Date(dateString);
            const now = new Date();
            const diffTime = Math.abs(now - date);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            if (diffDays < 7) {
                return `${diffDays} ${getDaysWord(diffDays)} –Ω–∞–∑–∞–¥`;
            } else if (diffDays < 30) {
                const weeks = Math.floor(diffDays / 7);
                return `${weeks} ${getWeeksWord(weeks)} –Ω–∞–∑–∞–¥`;
            } else if (diffDays < 365) {
                const months = Math.floor(diffDays / 30);
                return `${months} ${getMonthsWord(months)} –Ω–∞–∑–∞–¥`;
            } else {
                const years = Math.floor(diffDays / 365);
                return `${years} ${getYearsWord(years)} –Ω–∞–∑–∞–¥`;
            }
        }

        function getDaysWord(days) {
            if (days === 1) return '–¥–µ–Ω—å';
            if (days >= 2 && days <= 4) return '–¥–Ω—è';
            return '–¥–Ω–µ–π';
        }

        function getWeeksWord(weeks) {
            if (weeks === 1) return '–Ω–µ–¥–µ–ª—é';
            if (weeks >= 2 && weeks <= 4) return '–Ω–µ–¥–µ–ª–∏';
            return '–Ω–µ–¥–µ–ª—å';
        }

        function getMonthsWord(months) {
            if (months === 1) return '–º–µ—Å—è—Ü';
            if (months >= 2 && months <= 4) return '–º–µ—Å—è—Ü–∞';
            return '–º–µ—Å—è—Ü–µ–≤';
        }

        function getYearsWord(years) {
            if (years === 1) return '–≥–æ–¥';
            if (years >= 2 && years <= 4) return '–≥–æ–¥–∞';
            return '–ª–µ—Ç';
        }

        // ========== –ü–û–õ–£–ß–ï–ù–ò–ï –°–õ–£–ß–ê–ô–ù–û–ô –ö–ê–†–¢–ò–ù–ö–ò –ò–ó –ì–ê–õ–ï–†–ï–ò ==========
        function getRandomGalleryImage(project) {
            if (project.gallery && project.gallery.length > 0) {
                const randomIndex = Math.floor(Math.random() * project.gallery.length);
                return project.gallery[randomIndex].url;
            }
            return null;
        }

        // ========== –ó–ê–ì–†–£–ó–ö–ê –õ–ï–ù–¢–´ ==========
        async function loadFeed() {
            const feedEl = document.getElementById('feed');
            feedEl.innerHTML = '<div class="loading">‚è≥ –ó–∞–≥—Ä—É–∂–∞–µ–º –ª–µ–Ω—Ç—É...</div>';
            
            try {
                feedPosts = [];
                
                // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
                for (let i = 0; i < POSTS_PER_PAGE; i++) {
                    const randomType = projectTypes[Math.floor(Math.random() * projectTypes.length)];
                    const randomOffset = Math.floor(Math.random() * 1000); // –°–ª—É—á–∞–π–Ω–æ–µ —Å–º–µ—â–µ–Ω–∏–µ
                    
                    const url = `${API_BASE}/search?limit=1&offset=${randomOffset}&index=newest&facets=${encodeURIComponent(JSON.stringify([[`project_type:${randomType}`]]))}`;
                    
                    const response = await fetch(url);
                    const data = await response.json();
                    
                    if (data.hits && data.hits.length > 0) {
                        const project = data.hits[0];
                        
                        // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ–µ–∫—Ç–µ –¥–ª—è –≥–∞–ª–µ—Ä–µ–∏
                        const projectResponse = await fetch(`${API_BASE}/project/${project.slug}`);
                        const fullProject = await projectResponse.json();
                        
                        feedPosts.push({
                            ...project,
                            fullData: fullProject
                        });
                    }
                }
                
                // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º –ø–æ—Å—Ç—ã
                feedPosts = shuffleArray(feedPosts);
                
                // –ü–µ—Ä–µ–≤–æ–¥–∏–º –æ–ø–∏—Å–∞–Ω–∏—è
                feedEl.innerHTML = '<div class="loading">üîÑ –ü–µ—Ä–µ–≤–æ–¥–∏–º –ø–æ—Å—Ç—ã...</div>';
                
                for (const post of feedPosts) {
                    if (post.description) {
                        await translateText(post.description);
                    }
                }
                
                renderFeed();
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ª–µ–Ω—Ç—ã:', error);
                feedEl.innerHTML = '<div class="loading">‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å.</div>';
            }
        }

        // ========== –ü–ï–†–ï–ú–ï–®–ò–í–ê–ù–ò–ï –ú–ê–°–°–ò–í–ê ==========
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // ========== –ü–û–õ–£–ß–ï–ù–ò–ï –ü–ï–†–ï–í–ï–î–Å–ù–ù–û–ì–û –û–ü–ò–°–ê–ù–ò–Ø ==========
        function getDescription(project) {
            const cached = cachedTranslations.get(project.description);
            return cached || project.description || '–ù–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è';
        }

        // ========== –û–¢–†–ò–°–û–í–ö–ê –õ–ï–ù–¢–´ ==========
        function renderFeed() {
            const feedEl = document.getElementById('feed');
            
            if (feedPosts.length === 0) {
                feedEl.innerHTML = '<div class="loading">üòï –ù–µ—Ç –ø–æ—Å—Ç–æ–≤</div>';
                return;
            }

            let html = '';
            
            for (const post of feedPosts) {
                const description = getDescription(post);
                const iconUrl = post.icon_url || 'https://via.placeholder.com/64/2c2c30/a0a0a8?text=Mod';
                const randomImage = getRandomGalleryImage(post.fullData);
                const typeName = projectTypeNames[post.project_type] || '–ü—Ä–æ–µ–∫—Ç';
                
                html += `
                    <div class="feed-post" onclick="window.location.href='/minecraft/${post.project_type}.html#${post.project_type}/${post.slug}'">
                        <div class="post-header">
                            <img src="${iconUrl}" class="post-icon" alt="${escapeHtml(post.title)}"
                                 onerror="this.src='https://via.placeholder.com/64/2c2c30/a0a0a8?text=Mod'">
                            <div class="post-info">
                                <div class="post-title-row">
                                    <span class="post-title">${escapeHtml(post.title)}</span>
                                    <span class="post-type ${post.project_type}">${typeName}</span>
                                </div>
                                <div class="post-author">by ${escapeHtml(post.author || '–ù–µ–∏–∑–≤–µ—Å—Ç–µ–Ω')}</div>
                                <div class="post-stats">
                                    <span class="post-stat">
                                        <svg viewBox="0 0 24 24"><path d="M4 16v1a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3v-1m-4-4-4 4m0 0-4-4m4 4V4"/></svg>
                                        ${formatNumber(post.downloads)}
                                    </span>
                                    <span class="post-stat">
                                        <svg viewBox="0 0 24 24"><path d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2"/></svg>
                                        ${formatRelativeDate(post.date_modified)}
                                    </span>
                                </div>
                            </div>
                        </div>
                        
                        ${randomImage ? `
                            <img src="${randomImage}" class="post-image" onclick="event.stopPropagation(); openModal('${randomImage}')">
                        ` : ''}
                        
                        <div class="post-body">
                            <div class="post-description">${escapeHtml(description)}</div>
                            <div class="post-categories">
                                ${(post.categories || []).slice(0, 5).map(cat => 
                                    `<span class="category-tag">${escapeHtml(cat)}</span>`
                                ).join('')}
                            </div>
                        </div>
                        
                        <div class="post-footer">
                            <span class="post-date">–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ ${formatRelativeDate(post.date_created)}</span>
                            <div class="post-actions">
                                <button class="action-btn" onclick="event.stopPropagation(); window.location.href='/minecraft/${post.project_type}.html#${post.project_type}/${post.slug}'">
                                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
                                    –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            feedEl.innerHTML = html;
        }

        // ========== –ó–ê–©–ò–¢–ê –û–¢ XSS ==========
        function escapeHtml(unsafe) {
            if (!unsafe) return '';
            return String(unsafe)
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
                .replace(/"/g, "&quot;")
                .replace(/'/g, "&#039;");
        }

        // ========== –ó–ê–ö–†–´–¢–ò–ï –ú–û–î–ê–õ–¨–ù–û–ì–û –û–ö–ù–ê –ü–û ESC ==========
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeModal();
            }
        });

        // ========== –ó–ê–ü–£–°–ö ==========
        loadFeed();
    </script>
</body>
</html>
